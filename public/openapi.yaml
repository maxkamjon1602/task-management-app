openapi: 3.0.3
info:
  title: Task Management â€” API Docs
  description: Swagger - OpenAPI docs for existing Task routes.
servers:
- url: http://localhost:8000
  description: task-management-app
paths:
  /tasks:
    get:
      summary: All tasks.
      responses:
        '200':
          description: Tasks page rendered.
          content:
            text/html:
              schema:
                type: string
    post:
      summary: Create a new task.
      requestBody:
        required: true
        content:
          application/x-www-form-urlencoded:
            schema:
              type: object
              properties:
                title:
                  type: string
                description:
                  type: string
                status:
                  type: string
                  enum:
                  - pending
                  - in_progress
                  - done
              required:
              - title
          application/json:
            schema:
              type: object
              properties:
                title:
                  type: string
                description:
                  type: string
                status:
                  type: string
                  enum:
                  - pending
                  - in_progress
                  - done
              required:
              - title
      responses:
        '302':
          description: Go back to /tasks after create.
        '200':
          description: Created (if not redirecting).
  /tasks/create:
    get:
      summary: Show create form
      description: >
        Displays the HTML form used to create a new task.
      responses:
        '200':
          description: Create page shown
          content:
            text/html:
              schema:
                type: string
  /tasks/{id}:
    get:
      summary: Show task.
      parameters:
      - name: id
        in: path
        required: true
        schema:
          type: integer
      responses:
        '200':
          description: Task details page.
          content:
            text/html:
              schema:
                type: string
        '404':
          description: Not found.
    patch:
      summary: Update task.
      parameters:
      - name: id
        in: path
        required: true
        schema:
          type: integer
      requestBody:
        required: false
        content:
          application/x-www-form-urlencoded:
            schema:
              type: object
              properties:
                title:
                  type: string
                description:
                  type: string
                status:
                  type: string
                  enum:
                  - pending
                  - in_progress
                  - done
          application/json:
            schema:
              type: object
              properties:
                title:
                  type: string
                description:
                  type: string
                status:
                  type: string
                  enum:
                  - pending
                  - in_progress
                  - done
      responses:
        '302':
          description: Go back after update.
        '200':
          description: Updated (if not redirecting).
        '404':
          description: Not found.
    delete:
      summary: Delete task.
      parameters:
      - name: id
        in: path
        required: true
        schema:
          type: integer
      responses:
        '302':
          description: Go back after deletion.
        '200':
          description: Deleted (if not redirecting).
        '404':
          description: Not found.
  /task/{id}/toggle:
    post:
      summary: Toggle task status.
      parameters:
      - name: id
        in: path
        required: true
        schema:
          type: integer
      responses:
        '302':
          description: Go back after toggle.
        '200':
          description: Toggled (if not redirecting).
        '404':
          description: Not found.
components:
  schemas:
    Task:
      type: object
      properties:
        id:
          type: integer
        title:
          type: string
        description:
          type: string
        status:
          type: string
          enum:
          - pending
          - in_progress
          - done
        created_at:
          type: string
          format: date-time
        updated_at:
          type: string
          format: date-time
